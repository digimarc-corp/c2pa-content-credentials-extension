{"version":3,"file":"codegen-set-addon-channel.js","sourceRoot":"","sources":["../codegen-set-addon-channel.ts"],"names":[],"mappings":";;;AAAA,SAAgB,sBAAsB;IACpC,OAAO;;;;;;;;;;;;;;;GAeN,CAAC,IAAI,EAAE,CAAC;AACX,CAAC;AAjBD,wDAiBC","sourcesContent":["export function generateAddonSetupCode() {\n  return `\n    import createPostMessageChannel from '@storybook/channel-postmessage';\n    import createWebSocketChannel from '@storybook/channel-websocket';\n    import { addons } from '@storybook/addons';\n\n    const channel = createPostMessageChannel({ page: 'preview' });\n    addons.setChannel(channel);\n    window.__STORYBOOK_ADDONS_CHANNEL__ = channel;\n\n    const { SERVER_CHANNEL_URL } = globalThis;\n    if (SERVER_CHANNEL_URL) {\n      const serverChannel = createWebSocketChannel({ url: SERVER_CHANNEL_URL });\n      addons.setServerChannel(serverChannel);\n      window.__STORYBOOK_SERVER_CHANNEL__ = serverChannel;\n    }\n  `.trim();\n}\n"]}
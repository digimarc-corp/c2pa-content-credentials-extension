{"version":3,"file":"TestStage.js","sourceRoot":"","sources":["../../src/stages/TestStage.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;AAE3D,2CAAuE;AAEvE,qCAA6D;AAG7D;;GAEG;AACH,MAAa,cAAe,SAAQ,0BAAoC;IAAxE;;QACkB,QAAG,GAAsB,IAAI,2BAAiB,EAAE,CAAC;QACjD,kBAAa,GAAoB,IAAI,yBAAe,EAAE,CAAC;IACzE,CAAC;CAAA;AAHD,wCAGC;AAkBD,MAAa,SAAU,SAAQ,qBAAkE;IAC/F,YAAmB,iBAAoC,EAAE,cAA8B;QACrF,KAAK,CAAC,iBAAiB,EAAE,cAAc,EAAE,cAAc,CAAC,CAAC;IAC3D,CAAC;IAES,KAAK,CAAC,8BAA8B,CAAC,OAA0B;QACvE,OAAO;YACL,SAAS,EAAE,OAAO,CAAC,SAAS;SAC7B,CAAC;IACJ,CAAC;IAES,KAAK,CAAC,iBAAiB;QAC/B,MAAM,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QAC9C,MAAM,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;IACtC,CAAC;CACF;AAfD,8BAeC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport { StageBase, StageHooksBase, IStageContext } from './StageBase';\nimport { HeftConfiguration } from '../configuration/HeftConfiguration';\nimport { AsyncSeriesHook, AsyncParallelHook } from 'tapable';\nimport { LoggingManager } from '../pluginFramework/logging/LoggingManager';\n\n/**\n * @public\n */\nexport class TestStageHooks extends StageHooksBase<ITestStageProperties> {\n  public readonly run: AsyncParallelHook = new AsyncParallelHook();\n  public readonly configureTest: AsyncSeriesHook = new AsyncSeriesHook();\n}\n\n/**\n * @public\n */\nexport interface ITestStageProperties {\n  watchMode: boolean;\n}\n\n/**\n * @public\n */\nexport interface ITestStageContext extends IStageContext<TestStageHooks, ITestStageProperties> {}\n\nexport interface ITestStageOptions {\n  watchMode: boolean;\n}\n\nexport class TestStage extends StageBase<TestStageHooks, ITestStageProperties, ITestStageOptions> {\n  public constructor(heftConfiguration: HeftConfiguration, loggingManager: LoggingManager) {\n    super(heftConfiguration, loggingManager, TestStageHooks);\n  }\n\n  protected async getDefaultStagePropertiesAsync(options: ITestStageOptions): Promise<ITestStageProperties> {\n    return {\n      watchMode: options.watchMode\n    };\n  }\n\n  protected async executeInnerAsync(): Promise<void> {\n    await this.stageHooks.configureTest.promise();\n    await this.stageHooks.run.promise();\n  }\n}\n"]}
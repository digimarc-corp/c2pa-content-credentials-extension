{"version":3,"file":"CleanAction.js","sourceRoot":"","sources":["../../../src/cli/actions/CleanAction.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;AAI3D,qDAA0E;AAG1E,MAAa,WAAY,SAAQ,+BAAc;IAG7C,YAAmB,OAA+B;QAChD,KAAK,CACH;YACE,UAAU,EAAE,OAAO;YACnB,OAAO,EAAE,mBAAmB;YAC5B,aAAa,EAAE,EAAE;SAClB,EACD,OAAO,CACR,CAAC;IACJ,CAAC;IAEM,kBAAkB;QACvB,KAAK,CAAC,kBAAkB,EAAE,CAAC;QAE3B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC;YAC/C,iBAAiB,EAAE,eAAe;YAClC,WAAW,EACT,2FAA2F;gBAC3F,sCAAsC;SACzC,CAAC,CAAC;IACL,CAAC;IAES,KAAK,CAAC,kBAAkB;QAChC,MAAM,UAAU,GAAe,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;QAEtD,MAAM,iBAAiB,GAAuB;YAC5C,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK;SACzC,CAAC;QACF,MAAM,UAAU,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC;QAEpD,MAAM,UAAU,CAAC,YAAY,EAAE,CAAC;IAClC,CAAC;CACF;AAnCD,kCAmCC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport { CommandLineFlagParameter } from '@rushstack/ts-command-line';\n\nimport { HeftActionBase, IHeftActionBaseOptions } from './HeftActionBase';\nimport { CleanStage, ICleanStageOptions } from '../../stages/CleanStage';\n\nexport class CleanAction extends HeftActionBase {\n  private _deleteCacheFlag!: CommandLineFlagParameter;\n\n  public constructor(options: IHeftActionBaseOptions) {\n    super(\n      {\n        actionName: 'clean',\n        summary: 'Clean the project',\n        documentation: ''\n      },\n      options\n    );\n  }\n\n  public onDefineParameters(): void {\n    super.onDefineParameters();\n\n    this._deleteCacheFlag = this.defineFlagParameter({\n      parameterLongName: '--clear-cache',\n      description:\n        \"If this flag is provided, the compiler cache will also be cleared. This isn't dangerous, \" +\n        'but may lead to longer compile times'\n    });\n  }\n\n  protected async actionExecuteAsync(): Promise<void> {\n    const cleanStage: CleanStage = this.stages.cleanStage;\n\n    const cleanStageOptions: ICleanStageOptions = {\n      deleteCache: this._deleteCacheFlag.value\n    };\n    await cleanStage.initializeAsync(cleanStageOptions);\n\n    await cleanStage.executeAsync();\n  }\n}\n"]}